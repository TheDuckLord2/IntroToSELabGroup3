{% extends "store/base.html" %}

{% block title %}Products - E-Commerce Store{% endblock %}

{% block content %}
<div id="title-block">
    <h1>Our Products</h1>
</div>

<div id="search-bar">
    <form method="GET" action="{% url 'product' %}">
        <label for="search">Search By Product Title:</label>
        <input type="text" id="search" name="q" value="{{ query }}" required>
        <button type="submit">Search</button>
    </form>
</div>

<div id="product-grid">
    {% if products %}
        {% for product in products %}
            <div class="product-card">
                {% if product.image %}
                    <img src="{{ product.image.url }}" alt="{{ product.name }}" style="max-width: 100%; height: auto;">
                {% else %}
                    {% load static %}
                    <img src="{% static '../../../../../../../IntroToSELabGroup3/static/product_images/placeholder.png' %}" alt="No Image Available" style="max-width: 100%; height: auto;">
                {% endif %}
                <h2>{{ product.name }}</h2>
                <p>{{ product.description|truncatewords:20 }}</p>
                <p><strong>Price:</strong> ${{ product.price }}</p>

                <a href="{% url 'product_detail' product.id %}" class="btn">View Details</a>
            </div>
        {% endfor %}
    {% else %}
        <p>No products available at the moment.</p>
    {% endif %}
</div>
{% endblock %}
