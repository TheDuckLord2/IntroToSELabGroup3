{% extends "store/base.html" %} 

{% block title %}Products - e-Commerce Store{% endblock %}

{% block content %}
<main>
    <div id="title-block">
        <h1>Our Products</h1>
    </div>
    <div id = "search-bar">
        <form method="POST" action="{% url 'search' %}">
            {% csrf_token %}

            <label for="search">Search By Product Title:</label>
            <input type="text" id="search" name="search" required>

            <button type="submit">Search</button>
        </form>
    </div>
    <div id="product-grid">
        {% for product in products %}
            {% if titlematch %}
                <div id="product-card">
                    <img src="{{ product.image.url }}" alt="{{ product.name }}">
                    <h2>{{ product.name }}</h2>
                    <p>{{ product.description|truncatewords:20 }}</p> 
                    <p><strong>Price:</strong> ${{ product.price }}</p>
                    <a href="{% url 'product_detail' product.id %}" class="btn">View Details</a>
                </div>
            {% endif %}
        {% empty %}
            <p>No products available at the moment.</p>
        {% endfor %}
    </div>
</main>
{% endblock %}
